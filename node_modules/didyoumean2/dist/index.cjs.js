"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var leven=_interopDefault(require("leven")),pathOr=_interopDefault(require("ramda/src/pathOr")),deburr=_interopDefault(require("lodash.deburr"));!function(e){e.ALL_CLOSEST_MATCHES="all-closest-matches",e.ALL_MATCHES="all-matches",e.ALL_SORTED_MATCHES="all-sorted-matches",e.FIRST_CLOSEST_MATCH="first-closest-match",e.FIRST_MATCH="first-match"}(exports.ReturnTypeEnums||(exports.ReturnTypeEnums={})),function(e){e.EDIT_DISTANCE="edit-distance",e.SIMILARITY="similarity"}(exports.ThresholdTypeEnums||(exports.ThresholdTypeEnums={}));var unknownReturnTypeError=new Error("unknown returnType"),unknownThresholdTypeError=new Error("unknown thresholdType");function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(t,!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var fillDefaultOptions=function(e){var r=_objectSpread2({caseSensitive:!1,deburr:!1,matchPath:[],returnType:exports.ReturnTypeEnums.FIRST_CLOSEST_MATCH,thresholdType:exports.ThresholdTypeEnums.SIMILARITY,trimSpaces:!0},e);switch(r.thresholdType){case exports.ThresholdTypeEnums.EDIT_DISTANCE:return _objectSpread2({threshold:20},r);case exports.ThresholdTypeEnums.SIMILARITY:return _objectSpread2({threshold:.4},r);default:throw unknownThresholdTypeError}},getSimilarity=function(e,r){if(!e||!r)return 0;if(e===r)return 1;var t=leven(e,r),n=Math.max(e.length,r.length);return(n-t)/n},normalizeString=function(e,r){var t=e;return r.trimSpaces&&(t=t.trim().replace(/\s+/g," ")),r.deburr&&(t=deburr(t)),r.caseSensitive||(t=t.toLowerCase()),t},matchItemProcessor=function(e,r){var t=r.matchPath,n=Array.isArray(t)&&t.length?pathOr("",t,e):e;return"string"!=typeof n?"":normalizeString(n,r)},resultProcessor=function(e,r,t){switch(t){case exports.ReturnTypeEnums.ALL_CLOSEST_MATCHES:case exports.ReturnTypeEnums.ALL_MATCHES:case exports.ReturnTypeEnums.ALL_SORTED_MATCHES:return r.map(function(r){return e[r]});case exports.ReturnTypeEnums.FIRST_CLOSEST_MATCH:case exports.ReturnTypeEnums.FIRST_MATCH:return r.length?e[r[0]]:null;default:return null}},didYouMean=function(e,r,t){var n,o,s=fillDefaultOptions(t),u=s.returnType,a=s.threshold,p=s.thresholdType,T=normalizeString(e,s);switch(p){case exports.ThresholdTypeEnums.EDIT_DISTANCE:n=function(e){return e<=a},o=function(e){return leven(T,matchItemProcessor(e,s))};break;case exports.ThresholdTypeEnums.SIMILARITY:n=function(e){return e>=a},o=function(e){return getSimilarity(T,matchItemProcessor(e,s))};break;default:throw unknownThresholdTypeError}var c=[],h=r.length;switch(u){case exports.ReturnTypeEnums.ALL_CLOSEST_MATCHES:case exports.ReturnTypeEnums.FIRST_CLOSEST_MATCH:var i,l=[];switch(p){case exports.ThresholdTypeEnums.EDIT_DISTANCE:i=1/0;for(var f=0;f<h;f+=1){var E=o(r[f]);i>E&&(i=E),l.push(E)}break;case exports.ThresholdTypeEnums.SIMILARITY:i=0;for(var y=0;y<h;y+=1){var d=o(r[y]);i<d&&(i=d),l.push(d)}break;default:throw unknownThresholdTypeError}for(var S=l.length,m=0;m<S;m+=1){var _=l[m];n(_)&&_===i&&c.push(m)}break;case exports.ReturnTypeEnums.ALL_MATCHES:for(var b=0;b<h;b+=1){n(o(r[b]))&&c.push(b)}break;case exports.ReturnTypeEnums.ALL_SORTED_MATCHES:for(var A=[],I=0;I<h;I+=1){var v=o(r[I]);n(v)&&A.push({score:v,index:I})}switch(p){case exports.ThresholdTypeEnums.EDIT_DISTANCE:A.sort(function(e,r){return e.score-r.score});break;case exports.ThresholdTypeEnums.SIMILARITY:A.sort(function(e,r){return r.score-e.score});break;default:throw unknownThresholdTypeError}for(var w=0,L=A;w<L.length;w++){var O=L[w];c.push(O.index)}break;case exports.ReturnTypeEnums.FIRST_MATCH:for(var R=0;R<h;R+=1){if(n(o(r[R]))){c.push(R);break}}break;default:throw unknownReturnTypeError}return resultProcessor(r,c,u)};exports.default=didYouMean;
//# sourceMappingURL=index.cjs.js.map
